# Frontend

## Structure
What frontend does is to equivalently translate SysY source to in-memory IR for further processing
including middle end IR optimization and backend target code generation. Theoretically, it contains lexical
analysis, syntax analysis and (source-IR) translation.

Lexical and syntax analysis are mainly completed with ANTLR supports. A collection of .g4 files under 
[third-party/ANTLR](../../third-party/ANTLR) tell the grammar of SysY, according to which
[SysYLexer](SysYLexer.java), [SysYParser](SysYParser.java), [SysYBaseVisitor](SysYBaseVisitor.java), and
[SysYVisitor](SysYVisitor.java) are automatically generated by ANTLR.

* [SysYLexer](SysYLexer.java), [SysYParser](SysYParser.java) and [SysYBaseVisitor](SysYBaseVisitor.java) are
the ones can be remained unchanged since generated. The former two transcribe the input source into a 
parse tree (ANTLR AST).
* [SysYVisitor](SysYVisitor.java) is the key class performs traversal on the tree and generates IR. 

**You can imagine the translation process done by front end as a tiny [Visitor](SysYVisitor.java) traveling
through the parse tree with tools in both hands -- a mini hammer [Builder](IRBuilder.java) and 
a dictionary [Scope](Scope.java), knocking up in-memory IR constructs one by one :D** 

Finally, [Emitter](IREmitter.java) is the one to emit the in-memory IR in text-based format when needed. 

Here is a video illustrating how cbias' frontend build up an in-memory IR block by block:

https://user-images.githubusercontent.com/60537086/232201868-27d7b70f-f13b-4ada-83da-08fedbe65632.mov


## Test

Frontend tester can be found [here](https://github.com/cabinz/cbias-tester).

## References

- [ANTLR condensed tut](https://github.com/antlr/antlr4/blob/master/doc/index.md)
- [ANTLR tut slides](https://gfx.cse.taylor.edu/courses/cos382/slides/04_ANTLR.md.html?scale)
- [IntelliJ Antlr setup](https://gfx.cse.taylor.edu/courses/cos382/notes.md.html#antlr)
- [BUAA SE course sample frontend](https://github.com/BUAA-SE-Compiling/miniSysY_example_compiler)
